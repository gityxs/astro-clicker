(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{5887:function(e,t,r){"use strict";r.d(t,{Xz:function(){return y}});var n=r(6710),l=r(3428),o=r(2265),c=r(6375),s=r(1349),i=r.n(s);let u=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(e,t)=>u.every(r=>e[r]===t[r]);var a=Object.defineProperty,d=Object.defineProperties,f=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&__defNormalProp(e,r,t[r]);if(v)for(var r of v(t))m.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>d(e,f(t));function wrapContext(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}let b=wrapContext(o.createContext(null));let FiberProvider=class FiberProvider extends o.Component{render(){return o.createElement(b.Provider,{value:this._reactInternals},this.props.children)}};let{ReactCurrentOwner:h,ReactCurrentDispatcher:E}=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;r(5505),r(1177),r(4362);let w={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(e){let{handlePointer:t}=(0,n.c)(e);return{priority:1,enabled:!0,compute(e,t,r){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(w).reduce((e,r)=>({...e,[r]:t(r)}),{}),update:()=>{var t;let{events:r,internal:n}=e.getState();null!=(t=n.lastEvent)&&t.current&&r.handlers&&r.handlers.onPointerMove(n.lastEvent.current)},connect:t=>{var r;let{set:n,events:l}=e.getState();null==l.disconnect||l.disconnect(),n(e=>({events:{...e.events,connected:t}})),Object.entries(null!=(r=l.handlers)?r:[]).forEach(([e,r])=>{let[n,l]=w[e];t.addEventListener(n,r,{passive:l})})},disconnect:()=>{let{set:t,events:r}=e.getState();if(r.connected){var n;Object.entries(null!=(n=r.handlers)?n:[]).forEach(([e,t])=>{if(r&&r.connected instanceof HTMLElement){let[n]=w[e];r.connected.removeEventListener(n,t)}}),t(e=>({events:{...e.events,connected:void 0}}))}}}}let _=o.forwardRef(function({children:e,fallback:t,resize:r,style:s,gl:u,events:a=createPointerEvents,eventSource:d,eventPrefix:f,shadows:v,linear:p,flat:m,legacy:w,orthographic:_,frameloop:y,dpr:C,performance:g,raycaster:P,camera:O,scene:z,onPointerMissed:L,onCreated:S,...k},R){o.useMemo(()=>(0,n.e)(c),[]);let x=function(){let e=function(){var e,t;let r=function(){let e=o.useContext(b);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=o.useId(),r=o.useMemo(()=>{for(let r of[null==h?void 0:h.current,e,null==e?void 0:e.alternate]){if(!r)continue;let e=function traverseFiber(e,t,r){if(!e)return;if(!0===r(e))return e;let n=t?e.return:e.child;for(;n;){let e=traverseFiber(n,t,r);if(e)return e;n=t?null:n.sibling}}(r,!1,e=>{let r=e.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(e)return e}},[e,t]);return r}(),[n]=o.useState(()=>new Map);n.clear();let l=r;for(;l;){let r=null==(e=l.type)?void 0:e._context;r&&r!==b&&!n.has(r)&&n.set(r,null==(t=null==E?void 0:E.current)?void 0:t.readContext(wrapContext(r))),l=l.return}return n}();return o.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>o.createElement(t,null,o.createElement(r.Provider,__spreadProps(__spreadValues({},n),{value:e.get(r)}))),e=>o.createElement(FiberProvider,__spreadValues({},e))),[e])}(),[j,M]=function(e){var t;let{debounce:r,scroll:n,polyfill:l,offsetSize:c}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,s=l||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[u,a]=(0,o.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=(0,o.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:u}),f=r?"number"==typeof r?r:r.scroll:null,v=r?"number"==typeof r?r:r.resize:null,p=(0,o.useRef)(!1);(0,o.useEffect)(()=>(p.current=!0,()=>void(p.current=!1)));let[m,b,h]=(0,o.useMemo)(()=>{let callback=()=>{if(!d.current.element)return;let{left:e,top:t,width:r,height:n,bottom:l,right:o,x:s,y:i}=d.current.element.getBoundingClientRect(),u={left:e,top:t,width:r,height:n,bottom:l,right:o,x:s,y:i};d.current.element instanceof HTMLElement&&c&&(u.height=d.current.element.offsetHeight,u.width=d.current.element.offsetWidth),Object.freeze(u),p.current&&!areBoundsEqual(d.current.lastBounds,u)&&a(d.current.lastBounds=u)};return[callback,v?i()(callback,v):callback,f?i()(callback,f):callback]},[a,c,f,v]);function removeListeners(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",h,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null)}function addListeners(){d.current.element&&(d.current.resizeObserver=new s(h),d.current.resizeObserver.observe(d.current.element),n&&d.current.scrollContainers&&d.current.scrollContainers.forEach(e=>e.addEventListener("scroll",h,{capture:!0,passive:!0})))}return t=!!n,(0,o.useEffect)(()=>{if(t)return window.addEventListener("scroll",h,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",h,!0)},[h,t]),(0,o.useEffect)(()=>(window.addEventListener("resize",b),()=>void window.removeEventListener("resize",b)),[b]),(0,o.useEffect)(()=>{removeListeners(),addListeners()},[n,h,b]),(0,o.useEffect)(()=>removeListeners,[]),[e=>{e&&e!==d.current.element&&(removeListeners(),d.current.element=e,d.current.scrollContainers=function findScrollContainers(e){let t=[];if(!e||e===document.body)return t;let{overflow:r,overflowX:n,overflowY:l}=window.getComputedStyle(e);return[r,n,l].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...findScrollContainers(e.parentElement)]}(e),addListeners())},u,m]}({scroll:!0,debounce:{scroll:50,resize:0},...r}),F=o.useRef(null),T=o.useRef(null);o.useImperativeHandle(R,()=>F.current);let B=(0,n.u)(L),[N,D]=o.useState(!1),[I,H]=o.useState(!1);if(N)throw N;if(I)throw I;let U=o.useRef(null);(0,n.a)(()=>{let t=F.current;M.width>0&&M.height>0&&t&&(U.current||(U.current=(0,n.b)(t)),U.current.configure({gl:u,events:a,shadows:v,linear:p,flat:m,legacy:w,orthographic:_,frameloop:y,dpr:C,performance:g,raycaster:P,camera:O,scene:z,size:M,onPointerMissed:(...e)=>null==B.current?void 0:B.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(d?(0,n.i)(d)?d.current:d:T.current),f&&e.setEvents({compute:(e,t)=>{let r=e[f+"X"],n=e[f+"Y"];t.pointer.set(r/t.size.width*2-1,-(2*(n/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==S||S(e)}}),U.current.render(o.createElement(x,null,o.createElement(n.E,{set:H},o.createElement(o.Suspense,{fallback:o.createElement(n.B,{set:D})},e)))))}),o.useEffect(()=>{let e=F.current;if(e)return()=>(0,n.d)(e)},[]);let V=d?"none":"auto";return o.createElement("div",(0,l.Z)({ref:T,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...s}},k),o.createElement("div",{ref:j,style:{width:"100%",height:"100%"}},o.createElement("canvas",{ref:F,style:{display:"block"}},t)))}),y=o.forwardRef(function(e,t){return o.createElement(FiberProvider,null,o.createElement(_,(0,l.Z)({},e,{ref:t})))})},1349:function(e){function debounce(e,t,r){function later(){var i=Date.now()-c;i<t&&i>=0?n=setTimeout(later,t-i):(n=null,r||(s=e.apply(o,l),o=l=null))}null==t&&(t=100);var n,l,o,c,s,debounced=function(){o=this,l=arguments,c=Date.now();var i=r&&!n;return n||(n=setTimeout(later,t)),i&&(s=e.apply(o,l),o=l=null),s};return debounced.clear=function(){n&&(clearTimeout(n),n=null)},debounced.flush=function(){n&&(s=e.apply(o,l),o=l=null,clearTimeout(n),n=null)},debounced}debounce.debounce=debounce,e.exports=debounce}}]);