(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2728:function(e,t,r){Promise.resolve().then(r.t.bind(r,6069,23)),Promise.resolve().then(r.t.bind(r,4232,23)),Promise.resolve().then(r.bind(r,1522)),Promise.resolve().then(r.bind(r,6e3)),Promise.resolve().then(r.bind(r,8376)),Promise.resolve().then(r.bind(r,1673))},6e3:function(e,t,r){"use strict";r.r(t),r.d(t,{Game:function(){return Game}});var i=r(2265),o=r(5540),n=r(1677),a=r(4273),s=r(7180),c=r(5054),l=r(7960),u=r(2303),d=r(66),g=r(708),p=r(6725),f=r(8038);let m=new class{checkForRevealedResources(){let e=g.r.getState().craftedItems,t=s.o.getState().resourceRevealConditions;for(let r of Object.keys(t))t[r](e)&&(s.o.getState().unlock(r),delete t[r])}};var h=r(8960),S=r(4249);let y=new class{updateResourcesFromBots(e){let t=this.calculateResourcesFromBots(e);t.length&&s.o.getState().increase(t)}calculateResourcesFromBots(e){let t=[];for(let r of this.bots){let i=c.j.getState().upgrades[r].owned,o=i*e/1e3;o&&t.push([this.resources[r],o])}return t}constructor(){this.bots=["ironMiningBot","carbonMiningBot","goldMiningBot"],this.resources={ironMiningBot:S._.Iron,carbonMiningBot:S._.Carbon,goldMiningBot:S._.Gold}}};var b=r(9711),v=r(7991);function run(){var e,t;let r;let i="true"===localStorage.getItem("admin"),S=JSON.parse(null!==(e=localStorage.getItem("settings"))&&void 0!==e?e:"{}");d.F.setState({...S,admin:i});let I=(0,u.j)();I&&(n.V.setState({asteroids:I.asteroids,planets:I.planets}),s.o.setState({resources:{...(0,s.K)(),...I.resources}}),c.j.setState({upgrades:{...c.X,...I.upgrades}}),g.r.setState({craftedItems:{...(0,g.J)(),...I.craftedItems}}),p.G.setState({items:{...(0,p.l)(),...I.crafting}}),(0,l.zk)().then(e=>{let t=e.map(e=>"market"===e.type?o.HH.from(e):o.eN.from(e));a.L.setState({orders:t})}));let w=null!==(t=null==I?void 0:I.date)&&void 0!==t?t:Date.now(),_=w;return!function loop(){let e=Date.now(),t=e-w;w=e,y.updateResourcesFromBots(t),b._.updateResourcesInMiningOutposts(t),m.checkForRevealedResources(),h.D.checkForRevealedUpgrades(),f.l.checkIfCraftingComplete(),v.C.checkIfAsteroidShouldSpawn(),e-_>5e3&&((0,u.z)(),_=e);let i=d.F.getState().lowPowerMode;r=setTimeout(loop,i?1e3:200)}(),()=>{clearTimeout(r)}}function Game(){return(0,i.useEffect)(run,[]),null}},8376:function(e,t,r){"use strict";r.r(t),r.d(t,{I18n:function(){return I18n}});var i=r(3968),o=r(5345),n=r(251);function I18n(){return null}i.ZP.use(o.Z).use(n.Db).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:{en:{translation:{resource_scrip:"Scrip",resource_iron:"Iron",resource_carbon:"Carbon",resource_gold:"Gold",resource_platinum:"Platinum",resource_uranium:"Uranium",resource_shungite:"Shungite",resource_silver:"Silver",resource_silicon:"Silicon",resource_copper:"Copper",resource_red_mercury:"Red Mercury",resource_hydrogen:"Hydrogen",scrip:"Scrip",iron:"Iron",carbon:"Carbon",gold:"Gold",platinum:"Platinum",uranium:"Uranium",shungite:"Shungite",silver:"Silver",silicon:"Silicon",copper:"Copper",red_mercury:"Red Mercury",hydrogen:"Hydrogen",ironIngot:"Iron Ingot",ironIngot_other:"Iron Ingots",steelPlate:"Steel Bar",steelPlate_other:"Steel Bars",thermalShield:"Thermal Shield",thermalShield_other:"Thermal Shields",integratedCircuit:"Integrated Circuit",integratedCircuit_other:"Integrated Circuits",miningOutpost:"Mining Outpost",miningOutpost_other:"Mining Outposts",gasExtractingOrbitalStation:"Gas Extracting Orbital Station",gasExtractingOrbitalStation_other:"Gas Extracting Orbital Stations",planets:{xileon:"Xileon",xileon1:"Xileon I"},planetTypes:{gasGiant:"Gas Giant",rockyMoon:"Rocky Moon"},sectors:{asteroidField:"Asteroid Field",xileon:"Xileon"},upgrades:{ironClickEfficiency:{name:"Iron extractor",description:"Collect more iron per click."},carbonClickEfficiency:{name:"Carbon extractor",description:"Collect more carbon per click."},goldClickEfficiency:{name:"Gold extractor",description:"Collect more gold per click."},asteroidAttractor:{name_0:"Artificial gravity well I",name_1:"Artificial gravity well II",name_2:"Artificial gravity well III",name_3:"Artificial gravity well IV",name_4:"Artificial gravity well V",description:"Attract more asteroids."},asteroidClickStrength:{name_0:"Asteroid mining laser I",name_1:"Asteroid mining laser II",name_2:"Asteroid mining laser III",name_3:"Asteroid mining laser IV",description:"More mining power per click."},asteroidDurability:{name_0:"Stabilizing tractor beam I",name_1:"Stabilizing tractor beam II",name_2:"Stabilizing tractor beam III",name_3:"Stabilizing tractor beam IV",description:"Asteroids last longer before depleting."},carbonExtraction:{name:"Carbon prospecting",description:"Mine carbon from asteroids."},goldExtraction:{name:"Gold prospecting",description:"Mine gold from asteroids."},ironMiningBot:{name:"Iron mining bot",description:"Automatically collect iron over time."},carbonMiningBot:{name:"Carbon mining bot",description:"Automatically collect carbon over time."},goldMiningBot:{name:"Gold mining bot",description:"Automatically collect gold over time."},outpostCapacity:{name_0:"Outpost storage I",description:"Double the capacity of outposts."},outpostEfficiency:{name_0:"Outpost efficiency I",description:"Double the mining rate of outposts."}}}}}})},1673:function(e,t,r){"use strict";r.r(t),r.d(t,{Navigation:function(){return Navigation}});var i=r(7437),o=r(1396),n=r.n(o),a=r(9145),s=r(9710),c=r(4033),l=r(66);function Navigation(){let e=(0,c.usePathname)(),t=(0,l.F)(e=>e.admin),r=u.filter(e=>"/admin"!==e.path||t);return(0,i.jsx)("div",{className:"flex items-center justify-between bg-zinc-950 p-4 text-3xl uppercase lg:justify-normal lg:gap-4",children:r.map(t=>e===t.path?(0,i.jsx)("div",{className:"box-content flex h-9 items-center border-b-4",children:t.title},t.path):(0,i.jsx)("div",{className:"box-content flex h-9 items-center opacity-50",children:(0,i.jsx)(n(),{href:t.path,children:t.title})},t.path))})}let u=[{path:"/",title:(0,i.jsx)("span",{children:"Explore"})},{path:"/craft",title:(0,i.jsx)("span",{children:"Craft"})},{path:"/trade",title:(0,i.jsx)("span",{children:"Trade"})},{path:"/admin",title:(0,i.jsx)("span",{children:"Admin"})},{path:"/settings",title:(0,i.jsx)(a.Z,{})},{path:"/about",title:(0,i.jsx)(s.Z,{})}]},1522:function(e,t,r){"use strict";r.r(t),r.d(t,{Layout:function(){return Layout}});var i=r(7437),o=r(2265),n=r(8811),a=r.n(n);let s=a()(()=>Promise.all([r.e(689),r.e(776),r.e(887),r.e(257)]).then(r.bind(r,9257)),{loadableGenerated:{webpack:()=>[9257]},ssr:!1}),Layout=e=>{let{children:t}=e,r=(0,o.useRef)();return(0,i.jsxs)("div",{ref:r,style:{position:"relative",width:" 100%",height:"100%",overflow:"auto",touchAction:"auto"},children:[t,(0,i.jsx)(s,{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",pointerEvents:"none"},eventSource:r,eventPrefix:"client"})]})}},5540:function(e,t,r){"use strict";r.d(t,{HH:function(){return MarketOrder},eN:function(){return LimitOrder}});var i=r(7180),o=r(4249);let BaseOrder=class BaseOrder{validate(){throw Error("Method not implemented.")}cancel(){this.status="cancelled";let e="sell"===this.side?this.resource:o._.Scrip;i.o.getState().increase([[e,this.size-this.filled]])}fill(e,t){if("open"!==this.status)throw Error("Order is not open");if(e>this.size-this.filled)throw Error("Fill size is too large");this.filled+=e,this.executedPrice=t,this.filled>=this.size&&(this.status="filled")}get percentFilled(){return this.filled/this.size}constructor(e,t,r,i=Date.now()){this.id=crypto.randomUUID(),this.side=e,this.resource=t,this.size=r,this.time=i,this.filled=0,this.status="open"}};let MarketOrder=class MarketOrder extends BaseOrder{validate(){if(this.size<1)return!1;let e="sell"===this.side?this.resource:o._.Scrip;return i.o.getState().resources[e].quantity>=this.size}static from(e){let t=new MarketOrder(e.side,e.resource,e.size,e.time);return t.id=e.id,t.filled=e.filled,t.status=e.status,t.executedPrice=e.executedPrice,t}constructor(e,t,r,i=Date.now()){super(e,t,r,i),this.type="market"}};let LimitOrder=class LimitOrder extends BaseOrder{validate(){return!(this.size<1)&&("sell"===this.side?i.o.getState().resources[this.resource].quantity>=this.size:i.o.getState().resources[o._.Scrip].quantity>=this.size*this.price)}static from(e){let t=new LimitOrder(e.side,e.resource,e.size,e.price,e.time);return t.id=e.id,t.filled=e.filled,t.status=e.status,t.executedPrice=e.executedPrice,t}constructor(e,t,r,i,o=Date.now()){super(e,t,r,o),this.type="limit",this.price=i}}},6507:function(e,t,r){"use strict";r.d(t,{W:function(){return a},s:function(){return o}});var i,o,n=r(9453);(i=o||(o={})).GasGiant="gasGiant",i.RockyMoon="rockyMoon";let a={xileon:{name:"xileon",type:"gasGiant",outpostType:n.KE.GasExtractingOrbitalStation,availableResources:{hydrogen:1},maxOutposts:1},xileon1:{name:"xileon1",type:"rockyMoon",outpostType:n.KE.MiningOutpost,availableResources:{silicon:1},maxOutposts:1}}},7991:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var i=r(1458),o=r(4249),n=r(1677),a=r(7180),s=r(5054);let c=new class{clickAsteroid(e){let t=n.V.getState().asteroids[e];if(!t)return;let r=1+s.j.getState().upgrades.asteroidClickStrength.owned,i=1+s.j.getState().upgrades.asteroidDurability.owned,o=this.calculateResourcesForAsteroid(t,Math.min(t.durability*i,r));a.o.getState().increase(o);let c=t.durability-r/i<=0;return c?(n.V.getState().remove(t),this.spawnAsteroid(Date.now()+3e3)):n.V.getState().modify({...t,durability:t.durability-r/i}),o}checkIfAsteroidShouldSpawn(){let e=Object.keys(n.V.getState().asteroids).length,t=s.j.getState().upgrades.asteroidAttractor.owned;e<t+1&&this.spawnAsteroid()}spawnAsteroid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();n.V.getState().add(new i.lh({type:this.pickRandomAsteroidType(),spawnedAt:e}))}pickRandomAsteroidType(){return s.j.getState().upgrades.goldExtraction.owned>0&&Math.random()>.9?i.mI.Gold:s.j.getState().upgrades.carbonExtraction.owned>0&&Math.random()>.7?i.mI.Carbon:i.mI.Iron}calculateResourcesForAsteroid(e,t){let r=[],n=s.j.getState().upgrades.ironClickEfficiency.owned;if(r.push([o._.Iron,(1+n)*t]),s.j.getState().upgrades.carbonExtraction.owned>0){let n=s.j.getState().upgrades.carbonClickEfficiency.owned,a=Math.random()*(1.3+n);e.type===i.mI.Carbon&&(a+=2*(1+n)),(a=Math.floor(a*t))&&r.push([o._.Carbon,a])}if(s.j.getState().upgrades.goldExtraction.owned>0){let n=s.j.getState().upgrades.goldClickEfficiency.owned,a=Math.random()*(1.1+n);e.type===i.mI.Gold&&(a+=2*(1+n)),(a=Math.floor(a*t))&&r.push([o._.Gold,a])}return r}}},8038:function(e,t,r){"use strict";r.d(t,{l:function(){return c}});var i=r(9453),o=r(6725),n=r(708),a=r(7180),s=r(4249);function isCraftedItemType(e){return Object.values(i.KE).includes(e)}let c=new class{craft(e){let t=Date.now(),r=o.G.getState().items[e];if(r.craftingStartTime+i.ns[e].craftingTime>t)return!1;for(let[t,r]of i.ns[e].cost)if(isCraftedItemType(t)){let e=n.r.getState().craftedItems[t];if(e.quantity<r)return!1}else{let e=a.o.getState().resources[t];if(e.quantity<r)return!1}for(let[t,r]of i.ns[e].cost)isCraftedItemType(t)?n.r.getState().decrease(t,r):a.o.getState().decrease(t,r);return o.G.getState().craft(e),!0}setAutoCrafting(e,t){if(o.G.getState().setAutoCrafting(e,t),t){let t=this.craft(e);t||o.G.getState().setAutoCrafting(e,!1)}}checkIfCraftingComplete(){let e=Date.now(),t=o.G.getState().items;for(let r of Object.values(t))if(r.craftingStartTime&&r.craftingStartTime+i.ns[r.type].craftingTime<=e&&(n.r.getState().increase(r.type,1),o.G.getState().endCrafting(r.type),r.autoCrafting)){let e=this.craft(r.type);e||o.G.getState().setAutoCrafting(r.type,!1)}}sellItem(e,t){let r=n.r.getState().craftedItems[e];if(r.quantity<t)return!1;let o=i.ns[e],c=o.sellPrice,l=t*c;return n.r.getState().decrease(e,t),a.o.getState().increase([[s._.Scrip,l]]),!0}}},9711:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var i=r(6507),o=r(708),n=r(1677),a=r(7180),s=r(5054);let c=new class{addOutpost(e){let t=i.W[e].outpostType;o.r.getState().craftedItems[t].quantity<1||(o.r.getState().decrease(t,1),n.V.getState().addOutpost(e))}updateResourcesInMiningOutposts(e){let t=n.V.getState().planets,r=s.j.getState().upgrades.outpostEfficiency.owned+1,o=s.j.getState().upgrades.outpostCapacity.owned+1,a=5e3*o;for(let o of Object.values(i.W)){let i=t[o.name].outposts;if(i>0){let s=e/1e3*i,c=Object.entries(o.availableResources).reduce((e,i)=>{var n;let[c,l]=i,u=null!==(n=t[o.name].resources[c])&&void 0!==n?n:0,d=a-u;return e[c]=Math.min(s*l*r,d),e},{});n.V.getState().addResourcesToOutpost(o.name,c)}}}collectResourcesFromOutpost(e){let t=n.V.getState().planets[e].resources;n.V.getState().removeResourcesFromOutpost(e);let r=Object.entries(t);return a.o.getState().increase(r),r}}},8960:function(e,t,r){"use strict";r.d(t,{D:function(){return a}});var i=r(7180),o=r(5054),n=r(7991);let a=new class{buyUpgrade(e){for(let t of e.cost(o.j.getState().upgrades[e.type].owned))i.o.getState().decrease(t.resource,t.quantity);o.j.getState().increase(e.type),"asteroidAttractor"===e.type&&n.C.spawnAsteroid()}checkForRevealedUpgrades(){let e=i.o.getState().resources,t=o.j.getState().upgrades,r=o.j.getState().upgradeRevealConditions;for(let i of Object.keys(r))r[i](e,t)&&(o.j.getState().reveal(i),delete r[i])}}},66:function(e,t,r){"use strict";r.d(t,{F:function(){return o}});var i=r(4660);let o=(0,i.Ue)(e=>({lowPowerMode:!1,admin:!1,setLowPowerMode:t=>{e({lowPowerMode:t}),localStorage.setItem("settings",JSON.stringify({lowPowerMode:t}))}}))},6069:function(){}},function(e){e.O(0,[714,251,326,844,273,971,184,744],function(){return e(e.s=2728)}),_N_E=e.O()}]);